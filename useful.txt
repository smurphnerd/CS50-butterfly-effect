CREATE TABLE sqlite_sequence(name,seq);
CREATE TABLE users (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, username TEXT NOT NULL, password_hash TEXT NOT NULL, roots INTEGER DEFAULT 0 NOT NULL);
CREATE TABLE nodes (user_id INTEGER NOT NULL, key TEXT NOT NULL, message TEXT NOT NULL, parent TEXT, PRIMARY KEY (user_id, key) FOREIGN KEY (user_id) REFERENCES users(id));
CREATE TABLE children (user_id INTEGER NOT NULL, key TEXT NOT NULL, child_key TEXT NOT NULL, PRIMARY KEY (user_id, child_key) FOREIGN KEY (user_id, key) REFERENCES nodes(user_id, key));

export FLASK_ENV=development

.headers on
.mode column
.width auto
.nullvalue NULL

CREATE TABLE sqlite_sequence(name,seq);
CREATE TABLE users (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, username TEXT NOT NULL, password_hash TEXT NOT NULL, roots INTEGER DEFAULT 0 NOT NULL);
CREATE TABLE nodes (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, user_id INTEGER NOT NULL, key TEXT NOT NULL, message TEXT NOT NULL, FOREIGN KEY (user_id) REFERENCES users(id));
CREATE TABLE children (user_id INTEGER NOT NULL, node_id INTEGER NOT NULL, parent_key TEXT NOT NULL, child_key TEXT NOT NULL, FOREIGN KEY (user_id) REFERENCES users(id), FOREIGN KEY (node_id) REFERENCES nodes(id));